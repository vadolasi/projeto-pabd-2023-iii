<%- contentFor('title') %> <%= title %>
<%- contentFor('body') %>
<h1 class="text-3xl font-bold"><%= funcionario.nome %></h1>

<div class="grid grid-cols-2 mt-2 gap-2 w-175">
    <span class="text-lg mt-2"><strong>Código:</strong> <%= funcionario.codigo %></span>
    <span class="text-lg mt-2"><strong>CPF:</strong> <%= funcionario.cpf %></span>
    <span class="text-lg mt-2"><strong>Total de vendas realizadas:</strong> <%= funcionario.vendas %></span>
    <span class="text-lg mt-2"><strong>Total de dependentes cadastrados:</strong> 2</span>
</div>

<form id="form" class="mt-10 flex gap-2" method="POST" action="/funcionarios/deletar">
    <input type="hidden" id="codigo" name="codigo" value="<%= funcionario.codigo %>" />
    <button class="rounded-lg bg-red-500 font-semibold text-white text-lg py-2 px-5">Deletar</button>
    <a class="rounded-lg bg-pink-300 font-semibold text-white text-lg py-2 px-5" href="/funcionarios/<%= funcionario.codigo %>/editar">Editar</a>
</form>
    
<h2 class="text-2xl font-bold mt-10">Dependentes</h2>
<table class="table-auto border-collapse border border-black rounded mt-10 overflow-auto mb-10">
    <thead>
        <tr class="font-bold">
            <th class="border border-black py-1 px-3 text-left">Código</th>
            <th class="border border-black py-1 px-3 text-left">Nome</th>
            <th class="border border-black py-1 px-3 text-left">CPF</th>
            <th class="border border-black py-1 px-3 text-left">Parentesco</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="border border-black py-1 px-3 text-left">1</td>
            <td class="border border-black py-1 px-3 text-left">Lucas Rafael</td>
            <td class="border border-black py-1 px-3 text-left">000.000.000-00</td>
            <td class="border border-black py-1 px-3 text-left">Irmão(a)</td>
        </tr>
        <tr>
            <td class="border border-black py-1 px-3 text-left">1</td>
            <td class="border border-black py-1 px-3 text-left">Ana Leticia</td>
            <td class="border border-black py-1 px-3 text-left">000.000.000-00</td>
            <td class="border border-black py-1 px-3 text-left">Irmão(a)</td>
        </tr>
    </tbody>
</table>

<a class="rounded-lg bg-primary font-semibold text-white text-lg p-2" href="/funcionarios/<%= funcionario.codigo %>/cadastrar_dependente">Cadastrar dependente</a>

<script>
    const form = document.getElementById("form")
    
    form.addEventListener("submit", ev => {
        ev.preventDefault()
    
        Swal.fire({
            title: "Tem certeza disso?",
            text: "Tem certeza que dejesa deletar este funcionário? Esta acção não pode ser desfeita",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Sim, prosseguir",
            cancelButtonText: "Cancelar"
        }).then((result) => {
            if (result.isConfirmed) {
                form.submit()
            }
        })
    })
</script>
    